window.live2d_settings=Array(),live2d_settings.modelAPI="//live2d.hclonely.com/",live2d_settings.staticAPI="//cdn.jsdelivr.net",live2d_settings.tipsMessage="waifu-tips.json",live2d_settings.hitokotoAPI="hitokoto.cn",live2d_settings.modelId=2,live2d_settings.modelTexturesId=28,live2d_settings.showToolMenu=!0,live2d_settings.canCloseLive2d=!0,live2d_settings.canSwitchModel=!0,live2d_settings.canSwitchTextures=!0,live2d_settings.canSwitchHitokoto=!0,live2d_settings.canTakeScreenshot=!0,live2d_settings.canTurnToHomePage=!0,live2d_settings.canTurnToAboutPage=!0,live2d_settings.modelStorage=!0,live2d_settings.modelRandMode="switch",live2d_settings.modelTexturesRandMode="rand",live2d_settings.showHitokoto=!0,live2d_settings.showF12Status=!0,live2d_settings.showF12Message=!1,live2d_settings.showF12OpenMsg=!0,live2d_settings.showCopyMessage=!0,live2d_settings.showWelcomeMessage=!0,live2d_settings.waifuSize="280x330",live2d_settings.waifuTipsSize="250x70",live2d_settings.waifuFontSize="12px",live2d_settings.waifuToolFont="14px",live2d_settings.waifuToolLine="20px",live2d_settings.waifuToolTop="0px",live2d_settings.waifuMinWidth="768px",live2d_settings.waifuEdgeSide="right:0",live2d_settings.waifuDraggable="disable",live2d_settings.waifuDraggableRevert=!0,live2d_settings.l2dVersion="1.4.2",live2d_settings.l2dVerDate="2018.11.12",live2d_settings.homePageUrl="auto",live2d_settings.aboutPageUrl="https://blog.hclonely.com/posts/e1f9f17c/",live2d_settings.screenshotCaptureName="live2d.png",String.prototype.render=function(e){return this.replace(/(\\)?\{([^\{\}\\]+)(\\)?\}/g,(function(t,i,s,o){if(i||o)return t.replace("\\","");var n,a,l=s.replace(/\s/g,"").split("."),d=e;for(n=0,a=l.length;n<a;++n)if(null==(d=d[l[n]]))return"";return d}))};var re=/x/;console.log(re);var x=document.createElement("div");function empty(e){return void 0===e||null==e||""==e}function getRandText(e){return Array.isArray(e)?e[Math.floor(Math.random()*e.length+1)-1]:e}function showMessage(e,t,i){(i||""===sessionStorage.getItem("waifu-text")||null===sessionStorage.getItem("waifu-text"))&&(Array.isArray(e)&&(e=e[Math.floor(Math.random()*e.length+1)-1]),live2d_settings.showF12Message&&console.log("[Message]",e.replace(/<[^<>]+>/g,"")),i&&sessionStorage.setItem("waifu-text",e),$(".waifu-tips").stop(),$(".waifu-tips").html(e).fadeTo(200,1),void 0===t&&(t=5e3),hideMessage(t))}function hideMessage(e){$(".waifu-tips").stop().css("opacity",1),void 0===e&&(e=5e3),window.setTimeout((function(){sessionStorage.removeItem("waifu-text")}),e),$(".waifu-tips").delay(e).fadeTo(200,0)}function initModel(e,t){"function"!=typeof $.ajax&&("function"==typeof jQuery.ajax?window.$=jQuery:console.log("[Error] JQuery is not defined.")),live2d_settings.waifuSize=live2d_settings.waifuSize.split("x"),live2d_settings.waifuTipsSize=live2d_settings.waifuTipsSize.split("x"),live2d_settings.waifuEdgeSide=live2d_settings.waifuEdgeSide.split(":"),$("#live2d").attr("width",live2d_settings.waifuSize[0]),$("#live2d").attr("height",live2d_settings.waifuSize[1]),$(".waifu-tips").width(live2d_settings.waifuTipsSize[0]),$(".waifu-tips").height(live2d_settings.waifuTipsSize[1]),$(".waifu-tips").css("top",live2d_settings.waifuToolTop),$(".waifu-tips").css("font-size",live2d_settings.waifuFontSize),$(".waifu-tool").css("font-size",live2d_settings.waifuToolFont),$(".waifu-tool span").css("line-height",live2d_settings.waifuToolLine),"left"==live2d_settings.waifuEdgeSide[0]?$(".waifu").css("left",live2d_settings.waifuEdgeSide[1]+"px"):"right"==live2d_settings.waifuEdgeSide[0]&&$(".waifu").css("right",live2d_settings.waifuEdgeSide[1]+"px"),window.waifuResize=function(){$(window).width()<=Number(live2d_settings.waifuMinWidth.replace("px",""))?$(".waifu").hide():$(".waifu").show()},"disable"!=live2d_settings.waifuMinWidth&&(waifuResize(),$(window).resize((function(){waifuResize()})));try{"axis-x"==live2d_settings.waifuDraggable?$(".waifu").draggable({axis:"x",revert:live2d_settings.waifuDraggableRevert}):"unlimited"==live2d_settings.waifuDraggable?$(".waifu").draggable({revert:live2d_settings.waifuDraggableRevert}):$(".waifu").css("transition","all .3s ease-in-out")}catch(e){console.log("[Error] JQuery UI is not defined.")}live2d_settings.homePageUrl="auto"==live2d_settings.homePageUrl?window.location.protocol+"//"+window.location.hostname+"/":live2d_settings.homePageUrl,"file:"==window.location.protocol&&"//"==live2d_settings.modelAPI.substr(0,2)&&(live2d_settings.modelAPI="http:"+live2d_settings.modelAPI),$(".waifu-tool .fui-home").click((function(){window.location=window.location.origin})),$(".waifu-tool .fui-info-circle").click((function(){window.open(live2d_settings.aboutPageUrl)})),"object"==typeof e?loadTipsMessage(e):$.ajax({cache:!0,url:""==e?live2d_settings.tipsMessage:"waifu-tips.json"==e.substr(e.length-15)?e:e+"waifu-tips.json",dataType:"json",success:function(e){loadTipsMessage(e)}}),live2d_settings.showToolMenu||$(".waifu-tool").hide(),live2d_settings.canCloseLive2d||$(".waifu-tool .fui-cross").hide(),live2d_settings.canSwitchModel||$(".waifu-tool .fui-eye").hide(),live2d_settings.canSwitchTextures||$(".waifu-tool .fui-user").hide(),live2d_settings.canSwitchHitokoto||$(".waifu-tool .fui-chat").hide(),live2d_settings.canTakeScreenshot||$(".waifu-tool .fui-photo").hide(),live2d_settings.canTurnToHomePage||$(".waifu-tool .fui-home").hide(),live2d_settings.canTurnToAboutPage||$(".waifu-tool .fui-info-circle").hide(),void 0===e&&(e="");var i=localStorage.getItem("modelId");localStorage.getItem("modelTexturesId");if(!live2d_settings.modelStorage||null==i)i=live2d_settings.modelId,live2d_settings.modelTexturesId}function loadModel(e,t=0){live2d_settings.modelStorage?(localStorage.setItem("modelId",e),localStorage.setItem("modelTexturesId",t)):(sessionStorage.setItem("modelId",e),sessionStorage.setItem("modelTexturesId",t)),loadlive2d("live2d",live2d_settings.modelAPI+"get/?id="+e+"-"+t,live2d_settings.showF12Status?console.log("[Status]","live2d","模型",e+"-"+t,"加载完成"):null)}function loadTipsMessage(e){window.waifu_tips=e,$.each(e.mouseover,(function(e,t){$(document).on("mouseover",t.selector,(function(){var e=getRandText(t.text);showMessage(e=e.render({text:$(this).text()}),3e3)}))})),$.each(e.click,(function(e,t){$(document).on("click",t.selector,(function(){var e=getRandText(t.text);showMessage(e=e.render({text:$(this).text()}),3e3,!0)}))})),$.each(e.seasons,(function(e,t){var i=new Date,s=t.date.split("-")[0],o=t.date.split("-")[1]||s;if(s.split("/")[0]<=i.getMonth()+1&&i.getMonth()+1<=o.split("/")[0]&&s.split("/")[1]<=i.getDate()&&i.getDate()<=o.split("/")[1]){var n=getRandText(t.text);showMessage(n=n.render({year:i.getFullYear()}),6e3,!0)}})),live2d_settings.showF12OpenMsg&&(Object.defineProperty(x,"id",{get:function(){showMessage(getRandText(e.waifu.console_open_msg),5e3,!0)}}),re.toString=function(){return showMessage(getRandText(e.waifu.console_open_msg),5e3,!0),""}),live2d_settings.showCopyMessage&&$(document).on("copy",(function(){showMessage(getRandText(e.waifu.copy_message),5e3,!0)})),$(".waifu-tool .fui-photo").click((function(){showMessage(getRandText(e.waifu.screenshot_message),5e3,!0),window.Live2D.captureName=live2d_settings.screenshotCaptureName,window.Live2D.captureFrame=!0})),$(".waifu-tool .fui-cross").click((function(){sessionStorage.setItem("waifu-dsiplay","none"),showMessage(getRandText(e.waifu.hidden_message),1300,!0),window.setTimeout((function(){$(".waifu").hide()}),1300)})),$(".aplayer-lrc").on("mouseover",(function(){showMessage($(this).find(".aplayer-lrc-current").text(),3e3,!0)})),$("a.sns").on("mouseover",(function(){let e=$(this).parent().text().trim().replace(/：[\w\W]*/g,"");switch(e){case"QQ":showMessage("要加主人的QQ吗",3e3,!0);break;case"邮箱":showMessage("要给主人发邮件吗",3e3,!0);break;case"哔哩哔哩":showMessage("要去主人的B站空间吗",3e3,!0);break;default:showMessage("要看看主人的"+e+"吗",3e3,!0)}})),window.showWelcomeMessage=function(e){var t;if(window.location.href==live2d_settings.homePageUrl){var i=(new Date).getHours();t=getRandText(i>23||i<=5?e.waifu.hour_tips["t23-5"]:i>5&&i<=7?e.waifu.hour_tips["t5-7"]:i>7&&i<=11?e.waifu.hour_tips["t7-11"]:i>11&&i<=14?e.waifu.hour_tips["t11-14"]:i>14&&i<=17?e.waifu.hour_tips["t14-17"]:i>17&&i<=19?e.waifu.hour_tips["t17-19"]:i>19&&i<=21?e.waifu.hour_tips["t19-21"]:i>21&&i<=23?e.waifu.hour_tips["t21-23"]:e.waifu.hour_tips.default)}else{var s=e.waifu.referrer_message;if(""!==document.referrer){var o=document.createElement("a");o.href=document.referrer;var n=o.hostname.split(".")[1];window.location.hostname==o.hostname?t=s.localhost[0]+document.title.split(s.localhost[2])[0]+s.localhost[1]:"baidu"==n?t=s.baidu[0]+o.search.split("&wd=")[1].split("&")[0]+s.baidu[1]:"so"==n?t=s.so[0]+o.search.split("&q=")[1].split("&")[0]+s.so[1]:"google"==n?t=s.google[0]+document.title.split(s.google[2])[0]+s.google[1]:($.each(e.waifu.referrer_hostname,(function(e,t){e==o.hostname&&(o.hostname=getRandText(t))})),t=s.default[0]+o.hostname+s.default[1])}else t=s.none[0]+document.title.split(s.none[2])[0]+s.none[1]}showMessage(t,6e3)},live2d_settings.showWelcomeMessage&&showWelcomeMessage(e);var t=e.waifu;function i(e){return live2d_settings.modelStorage?localStorage.getItem(e):sessionStorage.getItem(e)}function s(){"visible"==$(document)[0].visibilityState&&o()}function o(){switch(live2d_settings.hitokotoAPI){case"lwl12.com":$.getJSON("https://api.lwl12.com/hitokoto/v1?encode=realjson",(function(e){if(!empty(e.source)){var i=t.hitokoto_api_message["lwl12.com"][0];empty(e.author)||(i+=t.hitokoto_api_message["lwl12.com"][1]),i=i.render({source:e.source,creator:e.author}),window.setTimeout((function(){showMessage(i+t.hitokoto_api_message["lwl12.com"][2],3e3,!0)}),5e3)}showMessage(e.text,5e3,!0)}));break;case"fghrsh.net":$.getJSON("https://api.fghrsh.net/hitokoto/rand/?encode=jsc&uid=3335",(function(e){if(!empty(e.source)){var i=t.hitokoto_api_message["fghrsh.net"][0];i=i.render({source:e.source,date:e.date}),window.setTimeout((function(){showMessage(i,3e3,!0)}),5e3),showMessage(e.hitokoto,5e3,!0)}}));break;case"jinrishici.com":$.ajax({url:"https://v2.jinrishici.com/one.json",xhrFields:{withCredentials:!0},success:function(e,i){if(!empty(e.data.origin.title)){var s=t.hitokoto_api_message["jinrishici.com"][0];s=s.render({title:e.data.origin.title,dynasty:e.data.origin.dynasty,author:e.data.origin.author}),window.setTimeout((function(){showMessage(s,3e3,!0)}),5e3)}showMessage(e.data.content,5e3,!0)}});break;default:$.getJSON("https://v1.hitokoto.cn",(function(e){if(!empty(e.from)){var i=t.hitokoto_api_message["hitokoto.cn"][0];i=i.render({source:e.from,creator:e.creator}),window.setTimeout((function(){showMessage(i,3e3,!0)}),5e3)}showMessage(e.hitokoto,5e3,!0)}))}}live2d_settings.showHitokoto&&(window.getActed=!0,window.hitokotoTimer=3e4,window.hitokotoInterval=!0,$(document).mousemove((function(e){getActed=!0})).keydown((function(){getActed=!0})),setInterval((function(){getActed?(getActed=hitokotoInterval=!1,window.clearInterval(hitokotoTimer)):hitokotoInterval||(hitokotoInterval=!0,hitokotoTimer=window.setInterval(s,3e4))}),1e3)),$(".waifu-tool .fui-eye").click((function(){var e,s;e=i("modelId"),s=live2d_settings.modelRandMode,$.ajax({cache:"switch"==s,url:live2d_settings.modelAPI+s+"/?id="+e,dataType:"json",success:function(e){loadModel(e.model.id);var i=e.model.message;$.each(t.model_message,(function(t,s){t==e.model.id&&(i=getRandText(s))})),showMessage(i,3e3,!0)}})})),$(".waifu-tool .fui-user").click((function(){var e,s,o;e=i("modelId"),s=i("modelTexturesId"),o=live2d_settings.modelTexturesRandMode,$.ajax({cache:"switch"==o,url:live2d_settings.modelAPI+o+"_textures/?id="+e+"-"+s,dataType:"json",success:function(i){1!=i.textures.id||1!=s&&0!=s?showMessage(t.load_rand_textures[1],3e3,!0):showMessage(t.load_rand_textures[0],3e3,!0),loadModel(e,i.textures.id)}})})),$(".waifu-tool .fui-chat").click((function(){o()}))}console.debug(x);